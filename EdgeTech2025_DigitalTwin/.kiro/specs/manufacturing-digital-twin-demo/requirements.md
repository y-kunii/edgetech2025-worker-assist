# 要件定義書

## 概要

製造現場デジタルツインデモシステムは、人とロボットの協調動作を可視化するElectronベースのアプリケーションです。エッジPCからWebSocket経由で受信したデータを基に、作業者の行動とロボットの状態をリアルタイムで表示し、設定された閾値に達した際にロボットアームへの指示を送信します。

## 要件

### 要件1

**ユーザーストーリー:** デモ来場者として、作業者とロボットの協調動作をリアルタイムで視覚的に確認したいので、デジタルツイン画面で現在の状況を把握できるようにしたい

#### 受入基準

1. WHEN エッジPCからWebSocket経由で画像データを受信 THEN システムは作業者の骨格が重ね合わせられた画像を表示する SHALL
2. WHEN 作業ステップが更新される THEN システムは現在の作業ステップ（待機、ネジ締め、工具受け渡し、ボルト締め、不在）を表示する SHALL
3. WHEN ロボットの状態が変更される THEN システムは現在のロボット状態（待機、稼働、グリップの開閉）をイラストで表現する SHALL
4. WHEN 作業者の状態が変更される THEN システムは現在の作業者状態（待機、ネジ締め、ボルト締め、不在）をイラストで表現する SHALL

### 要件2

**ユーザーストーリー:** デモ運営者として、作業の進捗を定量的に把握したいので、作業回数と閾値の比較を円グラフで確認できるようにしたい

#### 受入基準

1. WHEN ネジ締め作業が実行される THEN システムは実行回数をカウントし円グラフで予実を表示する SHALL
2. WHEN ボルト締め作業が実行される THEN システムは実行回数をカウントし円グラフで予実を表示する SHALL
3. WHEN 閾値設定が変更される THEN システムは新しい閾値で円グラフを更新する SHALL
4. IF 作業回数が閾値に達した THEN システムは視覚的にその旨を表示する SHALL

### 要件3

**ユーザーストーリー:** デモ来場者として、過去の作業履歴を時系列で確認したいので、タイムチャートで作業実績を表示できるようにしたい

#### 受入基準

1. WHEN 作業が完了する THEN システムは作業実績をタイムチャートに記録する SHALL
2. WHEN タイムチャートを表示する THEN システムは時間軸に対してどの作業を実施していたかを表示する SHALL
3. WHEN 新しい作業データを受信する THEN システムはタイムチャートをリアルタイムで更新する SHALL

### 要件4

**ユーザーストーリー:** システム管理者として、ロボットアームに適切な指示を送信したいので、作業回数が閾値に達した際に自動的にロボットへの指示を送信できるようにしたい

#### 受入基準

1. WHEN ネジ締め作業が閾値回数に達する THEN システムはエッジPC経由でロボットアームに工具受け渡し指示を送信する SHALL
2. WHEN ボルト締め作業が閾値回数に達する THEN システムはエッジPC経由でロボットアームに次の作業指示を送信する SHALL
3. WHEN ロボットへの指示を送信する THEN システムは送信結果をログに記録する SHALL
4. IF WebSocket接続が切断されている THEN システムはエラー状態を表示し再接続を試行する SHALL

### 要件5

**ユーザーストーリー:** 開発者として、システムの動作を単体テストで確認したいので、モックWebSocketサーバーを使用してテストできるようにしたい

#### 受入基準

1. WHEN モックWebSocketサーバーを起動する THEN システムは実際のエッジPCと同様のデータを送信する SHALL
2. WHEN 単体テストを実行する THEN システムはモックサーバーからのデータで正常に動作する SHALL
3. WHEN テストデータを変更する THEN システムは異なるシナリオでの動作を検証できる SHALL

### 要件6

**ユーザーストーリー:** システム利用者として、異なるOS環境で同じ体験を得たいので、Windows、Mac、Linuxで動作するElectronアプリケーションを使用できるようにしたい

#### 受入基準

1. WHEN Windows環境でアプリケーションを起動する THEN システムは正常に動作する SHALL
2. WHEN Mac環境でアプリケーションを起動する THEN システムは正常に動作する SHALL
3. WHEN Linux環境でアプリケーションを起動する THEN システムは正常に動作する SHALL
4. WHEN WebSocket接続を確立する THEN システムは全てのOS環境で安定した通信を行う SHALL

### 要件7

**ユーザーストーリー:** 製造現場の作業者として、視認性が高く操作しやすいインターフェースを使用したいので、シンプルでモダンなデザインのアプリケーションを利用できるようにしたい

#### 受入基準

1. WHEN アプリケーションを表示する THEN システムは白ベースのクリーンなデザインで情報を表示する SHALL
2. WHEN 状態情報を表示する THEN システムは装飾的要素を排除し、必要最小限の情報のみを明確に表示する SHALL
3. WHEN アニメーション効果を使用する THEN システムは控えめで実用的な効果のみを適用する SHALL
4. WHEN 文字情報を表示する THEN システムは高コントラストで読みやすいフォントサイズ（最小14px）を使用する SHALL
5. WHEN 色を使用して状態を表現する THEN システムは機能的な色使い（緑=正常、赤=異常、黄=注意）のみを使用する SHALL